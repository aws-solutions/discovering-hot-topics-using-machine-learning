// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`test youtube ingestion stack 1`] = `
{
  "Conditions": {
    "AwsCdkKinesisEncryptedStreamsUnsupportedRegions": {
      "Fn::Or": [
        {
          "Fn::Equals": [
            {
              "Ref": "AWS::Region",
            },
            "cn-north-1",
          ],
        },
        {
          "Fn::Equals": [
            {
              "Ref": "AWS::Region",
            },
            "cn-northwest-1",
          ],
        },
      ],
    },
  },
  "Parameters": {
    "AssetParametersacf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68fArtifactHashE200F17B": {
      "Description": "Artifact hash for asset "acf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68f"",
      "Type": "String",
    },
    "AssetParametersacf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68fS3Bucket8A9C57B1": {
      "Description": "S3 bucket for asset "acf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68f"",
      "Type": "String",
    },
    "AssetParametersacf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68fS3VersionKeyCDA58CAB": {
      "Description": "S3 key for asset version "acf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68f"",
      "Type": "String",
    },
    "AssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eArtifactHash7954C83A": {
      "Description": "Artifact hash for asset "e2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681e"",
      "Type": "String",
    },
    "AssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eS3Bucket4433505A": {
      "Description": "S3 bucket for asset "e2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681e"",
      "Type": "String",
    },
    "AssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eS3VersionKey82E6EE75": {
      "Description": "S3 key for asset version "e2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681e"",
      "Type": "String",
    },
  },
  "Resources": {
    "BusEA82B648": {
      "Properties": {
        "Name": "Bus",
      },
      "Type": "AWS::Events::EventBus",
    },
    "Stream790BDEE4": {
      "Properties": {
        "RetentionPeriodHours": 24,
        "ShardCount": 1,
        "StreamEncryption": {
          "Fn::If": [
            "AwsCdkKinesisEncryptedStreamsUnsupportedRegions",
            {
              "Ref": "AWS::NoValue",
            },
            {
              "EncryptionType": "KMS",
              "KeyId": "alias/aws/kinesis",
            },
          ],
        },
        "StreamModeDetails": {
          "StreamMode": "PROVISIONED",
        },
      },
      "Type": "AWS::Kinesis::Stream",
    },
    "YouTubeCommentsIngestionNestedStackYouTubeCommentsIngestionNestedStackResource900B4A6F": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "EventBus": {
            "Fn::GetAtt": [
              "BusEA82B648",
              "Arn",
            ],
          },
          "StreamARN": {
            "Fn::GetAtt": [
              "Stream790BDEE4",
              "Arn",
            ],
          },
          "YouTubeSearchIngestionFreq": "cron(0 12 * * ? *)",
          "YoutubeAPIKey": "fakeKey",
          "YoutubeSearchQuery": "fakeSearchString",
          "referencetoAssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eS3Bucket4433505ARef": {
            "Ref": "AssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eS3Bucket4433505A",
          },
          "referencetoAssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eS3VersionKey82E6EE75Ref": {
            "Ref": "AssetParameterse2902794f77117d9d61ec3d5bb1e5a5d4666fbda3f4f86b6bc64c096947b681eS3VersionKey82E6EE75",
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.",
              {
                "Ref": "AWS::Region",
              },
              ".",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Ref": "AssetParametersacf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68fS3Bucket8A9C57B1",
              },
              "/",
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParametersacf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68fS3VersionKeyCDA58CAB",
                      },
                    ],
                  },
                ],
              },
              {
                "Fn::Select": [
                  1,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParametersacf40ea099aade00508a33cc278f84e40947e32e01c3d06187e69b932ca4d68fS3VersionKeyCDA58CAB",
                      },
                    ],
                  },
                ],
              },
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
  },
}
`;
