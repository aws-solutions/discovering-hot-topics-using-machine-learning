// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Test custom ingestion nested stack 1`] = `
{
  "Conditions": {
    "AwsCdkKinesisEncryptedStreamsUnsupportedRegions": {
      "Fn::Or": [
        {
          "Fn::Equals": [
            {
              "Ref": "AWS::Region",
            },
            "cn-north-1",
          ],
        },
        {
          "Fn::Equals": [
            {
              "Ref": "AWS::Region",
            },
            "cn-northwest-1",
          ],
        },
      ],
    },
  },
  "Parameters": {
    "AssetParameters2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81aeArtifactHashA210655C": {
      "Description": "Artifact hash for asset "2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81ae"",
      "Type": "String",
    },
    "AssetParameters2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81aeS3Bucket165DD2B5": {
      "Description": "S3 bucket for asset "2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81ae"",
      "Type": "String",
    },
    "AssetParameters2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81aeS3VersionKeyFC28544F": {
      "Description": "S3 key for asset version "2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81ae"",
      "Type": "String",
    },
    "AssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18ArtifactHash7CE69A74": {
      "Description": "Artifact hash for asset "cba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18"",
      "Type": "String",
    },
    "AssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18S3Bucket5CE1FA3E": {
      "Description": "S3 bucket for asset "cba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18"",
      "Type": "String",
    },
    "AssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18S3VersionKeyBF74CA8A": {
      "Description": "S3 key for asset version "cba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18"",
      "Type": "String",
    },
  },
  "Resources": {
    "AccessLogD598EBE9": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "AccessLogPolicy4B3DB856": {
      "Properties": {
        "Bucket": {
          "Ref": "AccessLogD598EBE9",
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": {
                "AWS": "*",
              },
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "AccessLogD598EBE9",
                    "Arn",
                  ],
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "AccessLogD598EBE9",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BusEA82B648": {
      "Properties": {
        "Name": "Bus",
      },
      "Type": "AWS::Events::EventBus",
    },
    "Stream790BDEE4": {
      "Properties": {
        "RetentionPeriodHours": 24,
        "ShardCount": 1,
        "StreamEncryption": {
          "Fn::If": [
            "AwsCdkKinesisEncryptedStreamsUnsupportedRegions",
            {
              "Ref": "AWS::NoValue",
            },
            {
              "EncryptionType": "KMS",
              "KeyId": "alias/aws/kinesis",
            },
          ],
        },
        "StreamModeDetails": {
          "StreamMode": "PROVISIONED",
        },
      },
      "Type": "AWS::Kinesis::Stream",
    },
    "testS3EventNestedStacktestS3EventNestedStackResource0A9F329B": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "EventBus": {
            "Fn::GetAtt": [
              "BusEA82B648",
              "Arn",
            ],
          },
          "StreamARN": {
            "Fn::GetAtt": [
              "Stream790BDEE4",
              "Arn",
            ],
          },
          "referencetoAssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18S3Bucket5CE1FA3ERef": {
            "Ref": "AssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18S3Bucket5CE1FA3E",
          },
          "referencetoAssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18S3VersionKeyBF74CA8ARef": {
            "Ref": "AssetParameterscba9159b2a9ff6430f7f3318c812821dc4e8e40e4a4f1a2b82dcb75f78746b18S3VersionKeyBF74CA8A",
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.",
              {
                "Ref": "AWS::Region",
              },
              ".",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Ref": "AssetParameters2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81aeS3Bucket165DD2B5",
              },
              "/",
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParameters2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81aeS3VersionKeyFC28544F",
                      },
                    ],
                  },
                ],
              },
              {
                "Fn::Select": [
                  1,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParameters2632e2642cf4480d54cc10f359a79d7487dfe9677db9256b05857fca709e81aeS3VersionKeyFC28544F",
                      },
                    ],
                  },
                ],
              },
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
  },
}
`;
