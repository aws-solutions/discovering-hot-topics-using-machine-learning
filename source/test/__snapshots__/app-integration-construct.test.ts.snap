// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`test App Integration Construct 1`] = `
Object {
  "Parameters": Object {
    "AssetParameters3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8bArtifactHash098AD994": Object {
      "Description": "Artifact hash for asset \\"3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8b\\"",
      "Type": "String",
    },
    "AssetParameters3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8bS3Bucket608D7E2D": Object {
      "Description": "S3 bucket for asset \\"3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8b\\"",
      "Type": "String",
    },
    "AssetParameters3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8bS3VersionKey814A5302": Object {
      "Description": "S3 key for asset version \\"3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8b\\"",
      "Type": "String",
    },
    "AssetParameters71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2ArtifactHash03DC3DBA": Object {
      "Description": "Artifact hash for asset \\"71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2\\"",
      "Type": "String",
    },
    "AssetParameters71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2S3Bucket4FE12964": Object {
      "Description": "S3 bucket for asset \\"71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2\\"",
      "Type": "String",
    },
    "AssetParameters71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2S3VersionKey1089F5F0": Object {
      "Description": "S3 key for asset version \\"71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2\\"",
      "Type": "String",
    },
    "AssetParametersf84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61aeArtifactHash420791BD": Object {
      "Description": "Artifact hash for asset \\"f84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61ae\\"",
      "Type": "String",
    },
    "AssetParametersf84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61aeS3Bucket1E85DB03": Object {
      "Description": "S3 bucket for asset \\"f84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61ae\\"",
      "Type": "String",
    },
    "AssetParametersf84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61aeS3VersionKey83BE7703": Object {
      "Description": "S3 key for asset version \\"f84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61ae\\"",
      "Type": "String",
    },
  },
  "Resources": Object {
    "AccessLogD598EBE9": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "LogDeliveryWrite",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationEntityFirehoseGlueKmsFB7BE402": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationEntityFirehoseGlueKmsFB7BE402",
        "Roles": Array [
          Object {
            "Ref": "IntegrationEntityFirehoseRole6420D932",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationEntityFirehoseGlueTablePolicyA785738F": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBEntityentityTable12F162E4",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationEntityFirehoseGlueTablePolicyA785738F",
        "Roles": Array [
          Object {
            "Ref": "IntegrationEntityFirehoseRole6420D932",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationEntityFirehoseRole6420D932": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationEntityFirehoseRoleDefaultPolicy9E2AF819": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationEntityFirehoseRoleDefaultPolicy9E2AF819",
        "Roles": Array [
          Object {
            "Ref": "IntegrationEntityFirehoseRole6420D932",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationEntityKinesisFirehose22678A42": Object {
      "DependsOn": Array [
        "IntegrationEntityFirehoseGlueKmsFB7BE402",
        "IntegrationEntityFirehoseGlueTablePolicyA785738F",
        "IntegrationEntityFirehoseRoleDefaultPolicy9E2AF819",
        "IntegrationEntityFirehoseRole6420D932",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationEntityKinesisFirehosefirehoseloggroup7C26E1E6",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationEntityKinesisFirehosefirehoseloggroupfirehoselogstreamD3C9FFEB",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationEntityFirehoseRole6420D932",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBEntityentityTable12F162E4",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "entity/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "entity/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationEntityFirehoseRole6420D932",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationEntityKinesisFirehoseKinesisFirehosePolicy2ED4D164": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationEntityKinesisFirehosefirehoseloggroup7C26E1E6",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationEntityKinesisFirehosefirehoseloggroupfirehoselogstreamD3C9FFEB",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationEntityKinesisFirehoseKinesisFirehosePolicy2ED4D164",
        "Roles": Array [
          Object {
            "Ref": "IntegrationEntityKinesisFirehoseKinesisFirehoseRole5830F5A3",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationEntityKinesisFirehoseKinesisFirehoseRole5830F5A3": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationEntityKinesisFirehosefirehoseloggroup7C26E1E6": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationEntityKinesisFirehosefirehoseloggroupfirehoselogstreamD3C9FFEB": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationEntityKinesisFirehosefirehoseloggroup7C26E1E6",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationEventRuleEventRule0AllowEventRuletestStackIntegrationTextAnalysisLambdaFunction4852E2773B5AC7E8": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "IntegrationTextAnalysisLambdaFunctionAF9CFAB5",
            "Arn",
          ],
        },
        "Principal": "events.amazonaws.com",
        "SourceArn": Object {
          "Fn::GetAtt": Array [
            "IntegrationEventRuleEventRule0BCDBF110",
            "Arn",
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "IntegrationEventRuleEventRule0BCDBF110": Object {
      "Properties": Object {
        "EventBusName": Object {
          "Ref": "IntegrationEventRuleInferenceEvents6E8C129E",
        },
        "EventPattern": Object {
          "account": Array [
            Object {
              "Ref": "AWS::AccountId",
            },
          ],
          "region": Array [
            Object {
              "Ref": "AWS::Region",
            },
          ],
          "source": Array [
            "com.test",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::GetAtt": Array [
                "IntegrationTextAnalysisLambdaFunctionAF9CFAB5",
                "Arn",
              ],
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "IntegrationEventRuleEventRule1928958BC": Object {
      "Properties": Object {
        "EventBusName": Object {
          "Ref": "IntegrationEventRuleInferenceEvents6E8C129E",
        },
        "EventPattern": Object {
          "account": Array [
            Object {
              "Ref": "AWS::AccountId",
            },
          ],
          "region": Array [
            Object {
              "Ref": "AWS::Region",
            },
          ],
          "source": Array [
            "com.topic",
            "com.topic.mappings",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::GetAtt": Array [
                "IntegrationTopicAnalysisLambdaFunction60A34A39",
                "Arn",
              ],
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "IntegrationEventRuleEventRule1AllowEventRuletestStackIntegrationTopicAnalysisLambdaFunctionD9660B2D94760C3B": Object {
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "IntegrationTopicAnalysisLambdaFunction60A34A39",
            "Arn",
          ],
        },
        "Principal": "events.amazonaws.com",
        "SourceArn": Object {
          "Fn::GetAtt": Array [
            "IntegrationEventRuleEventRule1928958BC",
            "Arn",
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "IntegrationEventRuleInferenceEvents6E8C129E": Object {
      "Properties": Object {
        "Name": "Integration-AppIntegration",
      },
      "Type": "AWS::Events::EventBus",
    },
    "IntegrationInfDBEntityentityTable12F162E4": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "entity generated by CDK",
          "Name": "entity",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "translated_text",
                "Type": "string",
              },
              Object {
                "Name": "entity_text",
                "Type": "string",
              },
              Object {
                "Name": "entity_type",
                "Type": "string",
              },
              Object {
                "Name": "entity_score",
                "Type": "double",
              },
              Object {
                "Name": "entity_begin_offset",
                "Type": "int",
              },
              Object {
                "Name": "entity_end_offset",
                "Type": "int",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/entity/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBGlueSecConfigC5DEC89D": Object {
      "Properties": Object {
        "EncryptionConfiguration": Object {
          "CloudWatchEncryption": Object {
            "CloudWatchEncryptionMode": "SSE-KMS",
            "KmsKeyArn": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":kms:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":alias/aws/glue",
                ],
              ],
            },
          },
          "JobBookmarksEncryption": Object {
            "JobBookmarksEncryptionMode": "CSE-KMS",
            "KmsKeyArn": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":kms:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":alias/aws/glue",
                ],
              ],
            },
          },
          "S3Encryptions": Array [
            Object {
              "S3EncryptionMode": "SSE-S3",
            },
          ],
        },
        "Name": "socialmediadb-sec-config",
      },
      "Type": "AWS::Glue::SecurityConfiguration",
    },
    "IntegrationInfDBHotTopicsDBCustomResource0E51A003": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "IntegrationInfDBHotTopicsDBLambdaFunctionD5E233F0",
            "Arn",
          ],
        },
      },
      "Type": "Custom::CreatePartition",
      "UpdateReplacePolicy": "Delete",
    },
    "IntegrationInfDBHotTopicsDBLambdaFunctionAwsEventsLambdaInvokePermission1A1717D53": Object {
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBHotTopicsDBLambdaGlueFFEE8997",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Properties": Object {
        "Action": "lambda:InvokeFunction",
        "FunctionName": Object {
          "Fn::GetAtt": Array [
            "IntegrationInfDBHotTopicsDBLambdaFunctionD5E233F0",
            "Arn",
          ],
        },
        "Principal": "events.amazonaws.com",
        "SourceArn": Object {
          "Fn::GetAtt": Array [
            "IntegrationInfDBHotTopicsDBNightlyCreateParitionNightlyCreateParitionwrappedEventsRuleB329EBF3",
            "Arn",
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "IntegrationInfDBHotTopicsDBLambdaFunctionD5E233F0": Object {
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRoleDefaultPolicy92017490",
        "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRole89E41EAA",
        "IntegrationInfDBHotTopicsDBLambdaGlueFFEE8997",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W58",
              "reason": "Lambda functions has the required permission to write CloudWatch Logs. It uses custom policy instead of arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole with tighter permissions.",
            },
            Object {
              "id": "W89",
              "reason": "This is not a rule for the general case, just for specific use cases/industries",
            },
            Object {
              "id": "W92",
              "reason": "Impossible for us to define the correct concurrency for clients",
            },
          ],
        },
      },
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Ref": "AssetParametersf84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61aeS3Bucket1E85DB03",
          },
          "S3Key": Object {
            "Fn::Join": Array [
              "",
              Array [
                Object {
                  "Fn::Select": Array [
                    0,
                    Object {
                      "Fn::Split": Array [
                        "||",
                        Object {
                          "Ref": "AssetParametersf84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61aeS3VersionKey83BE7703",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "Fn::Select": Array [
                    1,
                    Object {
                      "Fn::Split": Array [
                        "||",
                        Object {
                          "Ref": "AssetParametersf84f8dc310beb2bc257b40eb7d678d51b9af3cf1a3d704bb736adf7ba48c61aeS3VersionKey83BE7703",
                        },
                      ],
                    },
                  ],
                },
              ],
            ],
          },
        },
        "Description": "Lambda function to create parition on glue tables",
        "Environment": Object {
          "Variables": Object {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "DATABASE_NAME": Object {
              "Ref": "IntegrationInfDBTweetDBF81EA9E5",
            },
            "TABLE_NAMES": "sentiment,entity,keyphrase,topics,topic-mappings,txtinimgentity,txtinimgsentiment,txtinimgkeyphrase,moderationlabels,newsfeedstorage,twfeedstorage,youtubecomments",
          },
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRole89E41EAA",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 300,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRole89E41EAA": Object {
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": Array [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents",
                  ],
                  "Effect": "Allow",
                  "Resource": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":logs:",
                        Object {
                          "Ref": "AWS::Region",
                        },
                        ":",
                        Object {
                          "Ref": "AWS::AccountId",
                        },
                        ":log-group:/aws/lambda/*",
                      ],
                    ],
                  },
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "LambdaFunctionServiceRolePolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRoleDefaultPolicy92017490": Object {
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "Lambda needs the following minimum required permissions to send trace data to X-Ray and access ENIs in a VPC.",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRoleDefaultPolicy92017490",
        "Roles": Array [
          Object {
            "Ref": "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRole89E41EAA",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationInfDBHotTopicsDBLambdaGlueFFEE8997": Object {
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetPartition",
                "glue:GetTable",
                "glue:CreatePartition",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/*",
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":/aws-glue/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationInfDBHotTopicsDBLambdaGlueFFEE8997",
        "Roles": Array [
          Object {
            "Ref": "IntegrationInfDBHotTopicsDBLambdaFunctionServiceRole89E41EAA",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationInfDBHotTopicsDBNightlyCreateParitionNightlyCreateParitionwrappedEventsRuleB329EBF3": Object {
      "DependsOn": Array [
        "IntegrationInfDBEntityentityTable12F162E4",
        "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
        "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
        "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
        "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
        "IntegrationInfDBTopicstopicsTableE352FDCE",
        "IntegrationInfDBTwitterTwitterRecordB6E69351",
        "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
        "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
        "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
        "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
      ],
      "Properties": Object {
        "ScheduleExpression": "cron(1 0 * * ? *)",
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::GetAtt": Array [
                "IntegrationInfDBHotTopicsDBLambdaFunctionD5E233F0",
                "Arn",
              ],
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "keyphrase generated by CDK",
          "Name": "keyphrase",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "translated_text",
                "Type": "string",
              },
              Object {
                "Name": "phrase",
                "Type": "string",
              },
              Object {
                "Name": "phrase_score",
                "Type": "double",
              },
              Object {
                "Name": "phrase_begin_offset",
                "Type": "int",
              },
              Object {
                "Name": "phrase_end_offset",
                "Type": "int",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/keyphrase/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "moderationlabels generated by CDK",
          "Name": "moderationlabels",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "image_url",
                "Type": "string",
              },
              Object {
                "Name": "label_name",
                "Type": "string",
              },
              Object {
                "Name": "confidence",
                "Type": "double",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/moderationlabels/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "newsfeedstorage generated by CDK",
          "Name": "newsfeedstorage",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "entities",
                "Type": "struct<urls:array<struct<expanded_url:string>>,media:array<struct<media_url:string>>>",
              },
              Object {
                "Name": "metadata",
                "Type": "struct<website:string,country:string,topic:string>",
              },
              Object {
                "Name": "lang",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "translated_text",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/newsfeedstorage/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBSentimentsentimentTable2A4FD6F0": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "sentiment generated by CDK",
          "Name": "sentiment",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "translated_text",
                "Type": "string",
              },
              Object {
                "Name": "sentiment",
                "Type": "string",
              },
              Object {
                "Name": "sentimentposscore",
                "Type": "double",
              },
              Object {
                "Name": "sentimentnegscore",
                "Type": "double",
              },
              Object {
                "Name": "sentimentneuscore",
                "Type": "double",
              },
              Object {
                "Name": "sentimentmixscore",
                "Type": "double",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/sentiment/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBTopicMappingstopicmappingsTableCA762584": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "topic-mappings generated by CDK",
          "Name": "topic-mappings",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "job_id",
                "Type": "string",
              },
              Object {
                "Name": "job_timestamp",
                "Type": "timestamp",
              },
              Object {
                "Name": "topic",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/topic-mappings/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBTopicstopicsTableE352FDCE": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "topics generated by CDK",
          "Name": "topics",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "job_id",
                "Type": "string",
              },
              Object {
                "Name": "job_timestamp",
                "Type": "timestamp",
              },
              Object {
                "Name": "term",
                "Type": "string",
              },
              Object {
                "Name": "weight",
                "Type": "double",
              },
              Object {
                "Name": "topic",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/topics/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBTweetDBEncryption7809FB74": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DataCatalogEncryptionSettings": Object {
          "EncryptionAtRest": Object {
            "CatalogEncryptionMode": "SSE-KMS",
            "SseAwsKmsKeyId": "alias/aws/glue",
          },
        },
      },
      "Type": "AWS::Glue::DataCatalogEncryptionSettings",
    },
    "IntegrationInfDBTweetDBF81EA9E5": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseInput": Object {
          "Name": "socialmediadb",
        },
      },
      "Type": "AWS::Glue::Database",
    },
    "IntegrationInfDBTwitterTwitterRecordB6E69351": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "Store Twitter Records",
          "Name": "twfeedstorage",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "db_created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "coordinates",
                "Type": "struct<type:string,coordinates:array<double>>",
              },
              Object {
                "Name": "retweeted",
                "Type": "boolean",
              },
              Object {
                "Name": "source",
                "Type": "string",
              },
              Object {
                "Name": "entities",
                "Type": "struct<hashtags:array<struct<text:string,indices:array<bigint>>>,urls:array<struct<url:string,expanded_url:string,display_url:string,indices:array<bigint>>>>",
              },
              Object {
                "Name": "reply_count",
                "Type": "bigint",
              },
              Object {
                "Name": "favorite_count",
                "Type": "bigint",
              },
              Object {
                "Name": "geo",
                "Type": "struct<type:string,coordinates:array<double>>",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "truncated",
                "Type": "boolean",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "retweet_count",
                "Type": "bigint",
              },
              Object {
                "Name": "possibly_sensitive",
                "Type": "boolean",
              },
              Object {
                "Name": "filter_level",
                "Type": "string",
              },
              Object {
                "Name": "created_at",
                "Type": "string",
              },
              Object {
                "Name": "place",
                "Type": "struct<id:string,url:string,place_type:string,name:string,full_name:string,country_code:string,country:string,bounding_box:struct<type:string,coordinates:array<array<array<float>>>>>",
              },
              Object {
                "Name": "favorited",
                "Type": "boolean",
              },
              Object {
                "Name": "lang",
                "Type": "string",
              },
              Object {
                "Name": "in_reply_to_screen_name",
                "Type": "string",
              },
              Object {
                "Name": "is_quote_status",
                "Type": "boolean",
              },
              Object {
                "Name": "in_reply_to_user_id_str",
                "Type": "string",
              },
              Object {
                "Name": "user",
                "Type": "struct<id:bigint,id_str:string,name:string,screen_name:string,location:string,url:string,description:string,translator_type:string,protected:boolean,verified:boolean,followers_count:bigint,friends_count:bigint,listed_count:bigint,favourites_count:bigint,statuses_count:bigint,created_at:string,utc_offset:bigint,time_zone:string,geo_enabled:boolean,lang:string,contributors_enabled:boolean,is_translator:boolean,profile_background_color:string,profile_background_image_url:string,profile_background_image_url_https:string,profile_background_tile:boolean,profile_link_color:string,profile_sidebar_border_color:string,profile_sidebar_fill_color:string,profile_text_color:string,profile_use_background_image:boolean,profile_image_url:string,profile_image_url_https:string,profile_banner_url:string,default_profile:boolean,default_profile_image:boolean>",
              },
              Object {
                "Name": "quote_count",
                "Type": "bigint",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/twfeedstorage/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "txtinimgentity generated by CDK",
          "Name": "txtinimgentity",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "entity_text",
                "Type": "string",
              },
              Object {
                "Name": "entity_type",
                "Type": "string",
              },
              Object {
                "Name": "entity_score",
                "Type": "double",
              },
              Object {
                "Name": "entity_begin_offset",
                "Type": "int",
              },
              Object {
                "Name": "entity_end_offset",
                "Type": "int",
              },
              Object {
                "Name": "image_url",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/txtinimgentity/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "txtinimgkeyphrase generated by CDK",
          "Name": "txtinimgkeyphrase",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "phrase",
                "Type": "string",
              },
              Object {
                "Name": "phrase_score",
                "Type": "double",
              },
              Object {
                "Name": "phrase_begin_offset",
                "Type": "int",
              },
              Object {
                "Name": "phrase_end_offset",
                "Type": "int",
              },
              Object {
                "Name": "image_url",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/txtinimgkeyphrase/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "txtinimgsentiment generated by CDK",
          "Name": "txtinimgsentiment",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "sentiment",
                "Type": "string",
              },
              Object {
                "Name": "sentimentposscore",
                "Type": "double",
              },
              Object {
                "Name": "sentimentnegscore",
                "Type": "double",
              },
              Object {
                "Name": "sentimentneuscore",
                "Type": "double",
              },
              Object {
                "Name": "sentimentmixscore",
                "Type": "double",
              },
              Object {
                "Name": "image_url",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/txtinimgsentiment/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C": Object {
      "Properties": Object {
        "CatalogId": Object {
          "Ref": "AWS::AccountId",
        },
        "DatabaseName": Object {
          "Ref": "IntegrationInfDBTweetDBF81EA9E5",
        },
        "TableInput": Object {
          "Description": "youtubecomments generated by CDK",
          "Name": "youtubecomments",
          "Parameters": Object {
            "classification": "parquet",
            "has_encrypted_data": false,
          },
          "PartitionKeys": Array [
            Object {
              "Name": "created_at",
              "Type": "timestamp",
            },
          ],
          "StorageDescriptor": Object {
            "Columns": Array [
              Object {
                "Name": "account_name",
                "Type": "string",
              },
              Object {
                "Name": "platform",
                "Type": "string",
              },
              Object {
                "Name": "id_str",
                "Type": "string",
              },
              Object {
                "Name": "video_id",
                "Type": "string",
              },
              Object {
                "Name": "title",
                "Type": "string",
              },
              Object {
                "Name": "text",
                "Type": "string",
              },
              Object {
                "Name": "parent_id",
                "Type": "string",
              },
              Object {
                "Name": "viewer_rating",
                "Type": "string",
              },
              Object {
                "Name": "like_count",
                "Type": "int",
              },
              Object {
                "Name": "updated_at",
                "Type": "timestamp",
              },
              Object {
                "Name": "search_query",
                "Type": "string",
              },
              Object {
                "Name": "lang",
                "Type": "string",
              },
              Object {
                "Name": "_translated_text",
                "Type": "string",
              },
              Object {
                "Name": "_cleansed_text",
                "Type": "string",
              },
            ],
            "Compressed": false,
            "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
            "Location": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "s3://",
                  Object {
                    "Ref": "IntegrationS3Bucket22BFCA0D",
                  },
                  "/youtubecomments/",
                ],
              ],
            },
            "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
            "SerdeInfo": Object {
              "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe",
            },
            "StoredAsSubDirectories": true,
          },
          "TableType": "EXTERNAL_TABLE",
        },
      },
      "Type": "AWS::Glue::Table",
    },
    "IntegrationKeyPhraseFirehoseGlueKms91D8A771": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationKeyPhraseFirehoseGlueKms91D8A771",
        "Roles": Array [
          Object {
            "Ref": "IntegrationKeyPhraseFirehoseRoleFAE5F92E",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationKeyPhraseFirehoseGlueTablePolicy02BF04C1": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationKeyPhraseFirehoseGlueTablePolicy02BF04C1",
        "Roles": Array [
          Object {
            "Ref": "IntegrationKeyPhraseFirehoseRoleFAE5F92E",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationKeyPhraseFirehoseRoleDefaultPolicy000C1FBB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationKeyPhraseFirehoseRoleDefaultPolicy000C1FBB",
        "Roles": Array [
          Object {
            "Ref": "IntegrationKeyPhraseFirehoseRoleFAE5F92E",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationKeyPhraseFirehoseRoleFAE5F92E": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationKeyPhraseKinesisFirehoseEE44A147": Object {
      "DependsOn": Array [
        "IntegrationKeyPhraseFirehoseGlueKms91D8A771",
        "IntegrationKeyPhraseFirehoseGlueTablePolicy02BF04C1",
        "IntegrationKeyPhraseFirehoseRoleDefaultPolicy000C1FBB",
        "IntegrationKeyPhraseFirehoseRoleFAE5F92E",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationKeyPhraseKinesisFirehosefirehoseloggroup5FE853F3",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationKeyPhraseKinesisFirehosefirehoseloggroupfirehoselogstream0B309A1B",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationKeyPhraseFirehoseRoleFAE5F92E",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBKeyPhrasekeyphraseTable41C485C9",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "keyphrase/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "keyphrase/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationKeyPhraseFirehoseRoleFAE5F92E",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationKeyPhraseKinesisFirehoseKinesisFirehosePolicyA504EB8A": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationKeyPhraseKinesisFirehosefirehoseloggroup5FE853F3",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationKeyPhraseKinesisFirehosefirehoseloggroupfirehoselogstream0B309A1B",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationKeyPhraseKinesisFirehoseKinesisFirehosePolicyA504EB8A",
        "Roles": Array [
          Object {
            "Ref": "IntegrationKeyPhraseKinesisFirehoseKinesisFirehoseRole87C0DE63",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationKeyPhraseKinesisFirehoseKinesisFirehoseRole87C0DE63": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationKeyPhraseKinesisFirehosefirehoseloggroup5FE853F3": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationKeyPhraseKinesisFirehosefirehoseloggroupfirehoselogstream0B309A1B": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationKeyPhraseKinesisFirehosefirehoseloggroup5FE853F3",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationModerationLabelsFirehoseGlueKmsF1A85007": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationModerationLabelsFirehoseGlueKmsF1A85007",
        "Roles": Array [
          Object {
            "Ref": "IntegrationModerationLabelsFirehoseRoleCE8DFD78",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationModerationLabelsFirehoseGlueTablePolicy6A0A8539": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationModerationLabelsFirehoseGlueTablePolicy6A0A8539",
        "Roles": Array [
          Object {
            "Ref": "IntegrationModerationLabelsFirehoseRoleCE8DFD78",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationModerationLabelsFirehoseRoleCE8DFD78": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationModerationLabelsFirehoseRoleDefaultPolicyCBAC0C86": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationModerationLabelsFirehoseRoleDefaultPolicyCBAC0C86",
        "Roles": Array [
          Object {
            "Ref": "IntegrationModerationLabelsFirehoseRoleCE8DFD78",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationModerationLabelsKinesisFirehoseB9DCFAE5": Object {
      "DependsOn": Array [
        "IntegrationModerationLabelsFirehoseGlueKmsF1A85007",
        "IntegrationModerationLabelsFirehoseGlueTablePolicy6A0A8539",
        "IntegrationModerationLabelsFirehoseRoleDefaultPolicyCBAC0C86",
        "IntegrationModerationLabelsFirehoseRoleCE8DFD78",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationModerationLabelsKinesisFirehosefirehoseloggroup82FAD98E",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationModerationLabelsKinesisFirehosefirehoseloggroupfirehoselogstreamB1C66DFF",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationModerationLabelsFirehoseRoleCE8DFD78",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBModerationLabelsmoderationlabelsTable424F1955",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "moderationlabels/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "moderationlabels/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationModerationLabelsFirehoseRoleCE8DFD78",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationModerationLabelsKinesisFirehoseKinesisFirehosePolicyF2E53986": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationModerationLabelsKinesisFirehosefirehoseloggroup82FAD98E",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationModerationLabelsKinesisFirehosefirehoseloggroupfirehoselogstreamB1C66DFF",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationModerationLabelsKinesisFirehoseKinesisFirehosePolicyF2E53986",
        "Roles": Array [
          Object {
            "Ref": "IntegrationModerationLabelsKinesisFirehoseKinesisFirehoseRole401AE269",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationModerationLabelsKinesisFirehoseKinesisFirehoseRole401AE269": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationModerationLabelsKinesisFirehosefirehoseloggroup82FAD98E": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationModerationLabelsKinesisFirehosefirehoseloggroupfirehoselogstreamB1C66DFF": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationModerationLabelsKinesisFirehosefirehoseloggroup82FAD98E",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationNewsFeedStorageFirehoseGlueKms20BC4B5C": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationNewsFeedStorageFirehoseGlueKms20BC4B5C",
        "Roles": Array [
          Object {
            "Ref": "IntegrationNewsFeedStorageFirehoseRole452916A8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationNewsFeedStorageFirehoseGlueTablePolicy02CC5F2F": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationNewsFeedStorageFirehoseGlueTablePolicy02CC5F2F",
        "Roles": Array [
          Object {
            "Ref": "IntegrationNewsFeedStorageFirehoseRole452916A8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationNewsFeedStorageFirehoseRole452916A8": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationNewsFeedStorageFirehoseRoleDefaultPolicy51797843": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationNewsFeedStorageFirehoseRoleDefaultPolicy51797843",
        "Roles": Array [
          Object {
            "Ref": "IntegrationNewsFeedStorageFirehoseRole452916A8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationNewsFeedStorageKinesisFirehose8B6E667E": Object {
      "DependsOn": Array [
        "IntegrationNewsFeedStorageFirehoseGlueKms20BC4B5C",
        "IntegrationNewsFeedStorageFirehoseGlueTablePolicy02CC5F2F",
        "IntegrationNewsFeedStorageFirehoseRoleDefaultPolicy51797843",
        "IntegrationNewsFeedStorageFirehoseRole452916A8",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroup25D876B0",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroupfirehoselogstreamD343D310",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationNewsFeedStorageFirehoseRole452916A8",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBNewsFeednewsfeedstorageTable9086158F",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "newsfeedstorage/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "newsfeedstorage/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationNewsFeedStorageFirehoseRole452916A8",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationNewsFeedStorageKinesisFirehoseKinesisFirehosePolicyD24D3C7A": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroup25D876B0",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroupfirehoselogstreamD343D310",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationNewsFeedStorageKinesisFirehoseKinesisFirehosePolicyD24D3C7A",
        "Roles": Array [
          Object {
            "Ref": "IntegrationNewsFeedStorageKinesisFirehoseKinesisFirehoseRoleC053D6A1",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationNewsFeedStorageKinesisFirehoseKinesisFirehoseRoleC053D6A1": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroup25D876B0": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroupfirehoselogstreamD343D310": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationNewsFeedStorageKinesisFirehosefirehoseloggroup25D876B0",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationS3Bucket22BFCA0D": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W51",
              "reason": "This S3 bucket Bucket does not need a bucket policy. The access to the bucket is restricted to Kinesis Fireshose using IAM Role policy",
            },
          ],
        },
      },
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "LoggingConfiguration": Object {
          "DestinationBucketName": Object {
            "Ref": "AccessLogD598EBE9",
          },
          "LogFilePrefix": "Integration/",
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationS3BucketPolicy3C2EAD91": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "IntegrationS3Bucket22BFCA0D",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
              ],
              "Sid": "HttpsOnly",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "IntegrationSentimentFirehoseGlueKms369B22FE": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationSentimentFirehoseGlueKms369B22FE",
        "Roles": Array [
          Object {
            "Ref": "IntegrationSentimentFirehoseRoleA51A0692",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationSentimentFirehoseGlueTablePolicyE64C328C": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBSentimentsentimentTable2A4FD6F0",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationSentimentFirehoseGlueTablePolicyE64C328C",
        "Roles": Array [
          Object {
            "Ref": "IntegrationSentimentFirehoseRoleA51A0692",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationSentimentFirehoseRoleA51A0692": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationSentimentFirehoseRoleDefaultPolicyE7E43DB5": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationSentimentFirehoseRoleDefaultPolicyE7E43DB5",
        "Roles": Array [
          Object {
            "Ref": "IntegrationSentimentFirehoseRoleA51A0692",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationSentimentKinesisFirehose1B0D197F": Object {
      "DependsOn": Array [
        "IntegrationSentimentFirehoseGlueKms369B22FE",
        "IntegrationSentimentFirehoseGlueTablePolicyE64C328C",
        "IntegrationSentimentFirehoseRoleDefaultPolicyE7E43DB5",
        "IntegrationSentimentFirehoseRoleA51A0692",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationSentimentKinesisFirehosefirehoseloggroup2FEBE358",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationSentimentKinesisFirehosefirehoseloggroupfirehoselogstreamCC518130",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationSentimentFirehoseRoleA51A0692",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBSentimentsentimentTable2A4FD6F0",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "sentiment/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "sentiment/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationSentimentFirehoseRoleA51A0692",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationSentimentKinesisFirehoseKinesisFirehosePolicy6257D729": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationSentimentKinesisFirehosefirehoseloggroup2FEBE358",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationSentimentKinesisFirehosefirehoseloggroupfirehoselogstreamCC518130",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationSentimentKinesisFirehoseKinesisFirehosePolicy6257D729",
        "Roles": Array [
          Object {
            "Ref": "IntegrationSentimentKinesisFirehoseKinesisFirehoseRole63E5C087",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationSentimentKinesisFirehoseKinesisFirehoseRole63E5C087": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationSentimentKinesisFirehosefirehoseloggroup2FEBE358": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationSentimentKinesisFirehosefirehoseloggroupfirehoselogstreamCC518130": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationSentimentKinesisFirehosefirehoseloggroup2FEBE358",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTextAnalysisLambdaFunctionAF9CFAB5": Object {
      "DependsOn": Array [
        "IntegrationTextAnalysisLambdaFunctionServiceRoleDefaultPolicyB94FE1F5",
        "IntegrationTextAnalysisLambdaFunctionServiceRoleC17422CC",
      ],
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W58",
              "reason": "Lambda functions has the required permission to write CloudWatch Logs. It uses custom policy instead of arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole with tighter permissions.",
            },
            Object {
              "id": "W89",
              "reason": "This is not a rule for the general case, just for specific use cases/industries",
            },
            Object {
              "id": "W92",
              "reason": "Impossible for us to define the correct concurrency for clients",
            },
          ],
        },
      },
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Ref": "AssetParameters3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8bS3Bucket608D7E2D",
          },
          "S3Key": Object {
            "Fn::Join": Array [
              "",
              Array [
                Object {
                  "Fn::Select": Array [
                    0,
                    Object {
                      "Fn::Split": Array [
                        "||",
                        Object {
                          "Ref": "AssetParameters3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8bS3VersionKey814A5302",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "Fn::Select": Array [
                    1,
                    Object {
                      "Fn::Split": Array [
                        "||",
                        Object {
                          "Ref": "AssetParameters3003a4d7a4dce054c1b4624f83ce569b470e8a0c8f959443de6cdfdc609e4d8bS3VersionKey814A5302",
                        },
                      ],
                    },
                  ],
                },
              ],
            ],
          },
        },
        "Environment": Object {
          "Variables": Object {
            "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1",
            "ENTITIES_FIREHOSE": Object {
              "Ref": "IntegrationEntityKinesisFirehose22678A42",
            },
            "KEYPHRASE_FIREHOSE": Object {
              "Ref": "IntegrationKeyPhraseKinesisFirehoseEE44A147",
            },
            "MODERATION_LABELS_FIREHOSE": Object {
              "Ref": "IntegrationModerationLabelsKinesisFirehoseB9DCFAE5",
            },
            "NEWSFEEDS_FEED_STORAGE": Object {
              "Ref": "IntegrationNewsFeedStorageKinesisFirehose8B6E667E",
            },
            "SENTIMENT_FIREHOSE": Object {
              "Ref": "IntegrationSentimentKinesisFirehose1B0D197F",
            },
            "TEXT_ANALYSIS_NS": "com.test",
            "TW_FEED_STORAGE": Object {
              "Ref": "IntegrationTwFeedStorageKinesisFirehose2717DCB9",
            },
            "TXT_IN_IMG_ENTITY_FIREHOSE": Object {
              "Ref": "IntegrationTxtInImgEntityKinesisFirehose9B2B792F",
            },
            "TXT_IN_IMG_KEYPHRASE_FIREHOSE": Object {
              "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehose33549B85",
            },
            "TXT_IN_IMG_SENTIMENT_FIREHOSE": Object {
              "Ref": "IntegrationTxtInImgSentimentKinesisFirehose853B28BB",
            },
            "YOUTUBECOMMENTS_FEED_STORAGE": Object {
              "Ref": "IntegrationYouTubeCommentsKinesisFirehose9913E37F",
            },
          },
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "IntegrationTextAnalysisLambdaFunctionServiceRoleC17422CC",
            "Arn",
          ],
        },
        "Runtime": "nodejs14.x",
        "Timeout": 900,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "IntegrationTextAnalysisLambdaFunctionServiceRoleC17422CC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": Array [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents",
                  ],
                  "Effect": "Allow",
                  "Resource": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":logs:",
                        Object {
                          "Ref": "AWS::Region",
                        },
                        ":",
                        Object {
                          "Ref": "AWS::AccountId",
                        },
                        ":log-group:/aws/lambda/*",
                      ],
                    ],
                  },
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "LambdaFunctionServiceRolePolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTextAnalysisLambdaFunctionServiceRoleDefaultPolicyB94FE1F5": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W76",
              "reason": "The lambda role policy requires to access multiple firehose buckets. Hence suppressing the SCPM rule",
            },
            Object {
              "id": "W12",
              "reason": "Lambda needs the following minimum required permissions to send trace data to X-Ray and access ENIs in a VPC.",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "firehose:PutRecord",
                "firehose:PutRecordBatch",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationSentimentKinesisFirehose1B0D197F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationEntityKinesisFirehose22678A42",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationKeyPhraseKinesisFirehoseEE44A147",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationTxtInImgSentimentKinesisFirehose853B28BB",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationTxtInImgEntityKinesisFirehose9B2B792F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationTxtInImgKeyPhraseKinesisFirehose33549B85",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationModerationLabelsKinesisFirehoseB9DCFAE5",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationTwFeedStorageKinesisFirehose2717DCB9",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationNewsFeedStorageKinesisFirehose8B6E667E",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationYouTubeCommentsKinesisFirehose9913E37F",
                    "Arn",
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTextAnalysisLambdaFunctionServiceRoleDefaultPolicyB94FE1F5",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTextAnalysisLambdaFunctionServiceRoleC17422CC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicAnalysisLambdaFunction60A34A39": Object {
      "DependsOn": Array [
        "IntegrationTopicAnalysisLambdaFunctionServiceRoleDefaultPolicyB4E2C8C3",
        "IntegrationTopicAnalysisLambdaFunctionServiceRoleDDC981DF",
      ],
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W58",
              "reason": "Lambda functions has the required permission to write CloudWatch Logs. It uses custom policy instead of arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole with tighter permissions.",
            },
            Object {
              "id": "W89",
              "reason": "This is not a rule for the general case, just for specific use cases/industries",
            },
            Object {
              "id": "W92",
              "reason": "Impossible for us to define the correct concurrency for clients",
            },
          ],
        },
      },
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Ref": "AssetParameters71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2S3Bucket4FE12964",
          },
          "S3Key": Object {
            "Fn::Join": Array [
              "",
              Array [
                Object {
                  "Fn::Select": Array [
                    0,
                    Object {
                      "Fn::Split": Array [
                        "||",
                        Object {
                          "Ref": "AssetParameters71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2S3VersionKey1089F5F0",
                        },
                      ],
                    },
                  ],
                },
                Object {
                  "Fn::Select": Array [
                    1,
                    Object {
                      "Fn::Split": Array [
                        "||",
                        Object {
                          "Ref": "AssetParameters71dd4a070c7233f683e1384f78fbc44c8f9ff5fc66438d0898990fb2b136d4b2S3VersionKey1089F5F0",
                        },
                      ],
                    },
                  ],
                },
              ],
            ],
          },
        },
        "Environment": Object {
          "Variables": Object {
            "TOPICS_FIREHOSE": Object {
              "Ref": "IntegrationTopicsKinesisFirehose9B7E7760",
            },
            "TOPICS_NS": "com.topic",
            "TOPIC_MAPPINGS_FIREHOSE": Object {
              "Ref": "IntegrationTopicMappingsKinesisFirehoseD34A1F74",
            },
            "TOPIC_MAPPINGS_NS": "com.topic.mappings",
          },
        },
        "Handler": "lambda_function.handler",
        "MemorySize": 256,
        "Role": Object {
          "Fn::GetAtt": Array [
            "IntegrationTopicAnalysisLambdaFunctionServiceRoleDDC981DF",
            "Arn",
          ],
        },
        "Runtime": "python3.8",
        "Timeout": 600,
        "TracingConfig": Object {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "IntegrationTopicAnalysisLambdaFunctionServiceRoleDDC981DF": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": Array [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents",
                  ],
                  "Effect": "Allow",
                  "Resource": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":logs:",
                        Object {
                          "Ref": "AWS::Region",
                        },
                        ":",
                        Object {
                          "Ref": "AWS::AccountId",
                        },
                        ":log-group:/aws/lambda/*",
                      ],
                    ],
                  },
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "LambdaFunctionServiceRolePolicy",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTopicAnalysisLambdaFunctionServiceRoleDefaultPolicyB4E2C8C3": Object {
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W12",
              "reason": "Lambda needs the following minimum required permissions to send trace data to X-Ray and access ENIs in a VPC.",
            },
          ],
        },
      },
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "firehose:PutRecord",
                "firehose:PutRecordBatch",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":firehose:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":deliverystream/",
                      Object {
                        "Ref": "IntegrationTopicsKinesisFirehose9B7E7760",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":firehose:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":deliverystream/",
                      Object {
                        "Ref": "IntegrationTopicMappingsKinesisFirehoseD34A1F74",
                      },
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicAnalysisLambdaFunctionServiceRoleDefaultPolicyB4E2C8C3",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicAnalysisLambdaFunctionServiceRoleDDC981DF",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicMappingsFirehoseGlueKms6C9EC083": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicMappingsFirehoseGlueKms6C9EC083",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicMappingsFirehoseRoleD0E34058",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicMappingsFirehoseGlueTablePolicyE583D1F0": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicMappingsFirehoseGlueTablePolicyE583D1F0",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicMappingsFirehoseRoleD0E34058",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicMappingsFirehoseRoleD0E34058": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTopicMappingsFirehoseRoleDefaultPolicy3A02C4BF": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicMappingsFirehoseRoleDefaultPolicy3A02C4BF",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicMappingsFirehoseRoleD0E34058",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicMappingsKinesisFirehoseD34A1F74": Object {
      "DependsOn": Array [
        "IntegrationTopicMappingsFirehoseGlueKms6C9EC083",
        "IntegrationTopicMappingsFirehoseGlueTablePolicyE583D1F0",
        "IntegrationTopicMappingsFirehoseRoleDefaultPolicy3A02C4BF",
        "IntegrationTopicMappingsFirehoseRoleD0E34058",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupDAF73689",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupfirehoselogstreamBBFB336F",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationTopicMappingsFirehoseRoleD0E34058",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBTopicMappingstopicmappingsTableCA762584",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "topic-mappings/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "topic-mappings/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationTopicMappingsFirehoseRoleD0E34058",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationTopicMappingsKinesisFirehoseKinesisFirehosePolicy34046622": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupDAF73689",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupfirehoselogstreamBBFB336F",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicMappingsKinesisFirehoseKinesisFirehosePolicy34046622",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicMappingsKinesisFirehoseKinesisFirehoseRoleEA13EA65",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicMappingsKinesisFirehoseKinesisFirehoseRoleEA13EA65": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupDAF73689": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupfirehoselogstreamBBFB336F": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationTopicMappingsKinesisFirehosefirehoseloggroupDAF73689",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTopicsFirehoseGlueKms9019CF4A": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicsFirehoseGlueKms9019CF4A",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicsFirehoseRoleAB51B4DE",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicsFirehoseGlueTablePolicy8DC575DB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBTopicstopicsTableE352FDCE",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicsFirehoseGlueTablePolicy8DC575DB",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicsFirehoseRoleAB51B4DE",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicsFirehoseRoleAB51B4DE": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTopicsFirehoseRoleDefaultPolicy5FC191A2": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicsFirehoseRoleDefaultPolicy5FC191A2",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicsFirehoseRoleAB51B4DE",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicsKinesisFirehose9B7E7760": Object {
      "DependsOn": Array [
        "IntegrationTopicsFirehoseGlueKms9019CF4A",
        "IntegrationTopicsFirehoseGlueTablePolicy8DC575DB",
        "IntegrationTopicsFirehoseRoleDefaultPolicy5FC191A2",
        "IntegrationTopicsFirehoseRoleAB51B4DE",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationTopicsKinesisFirehosefirehoseloggroup07A1FEDB",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationTopicsKinesisFirehosefirehoseloggroupfirehoselogstream3EB07CDB",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationTopicsFirehoseRoleAB51B4DE",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBTopicstopicsTableE352FDCE",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "topics/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "topics/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationTopicsFirehoseRoleAB51B4DE",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationTopicsKinesisFirehoseKinesisFirehosePolicy0D3750C7": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationTopicsKinesisFirehosefirehoseloggroup07A1FEDB",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationTopicsKinesisFirehosefirehoseloggroupfirehoselogstream3EB07CDB",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTopicsKinesisFirehoseKinesisFirehosePolicy0D3750C7",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTopicsKinesisFirehoseKinesisFirehoseRoleD9F19588",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTopicsKinesisFirehoseKinesisFirehoseRoleD9F19588": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTopicsKinesisFirehosefirehoseloggroup07A1FEDB": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTopicsKinesisFirehosefirehoseloggroupfirehoselogstream3EB07CDB": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationTopicsKinesisFirehosefirehoseloggroup07A1FEDB",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTwFeedStorageFirehoseGlueKms82D47141": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTwFeedStorageFirehoseGlueKms82D47141",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTwFeedStorageFirehoseRoleBDA1E404",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTwFeedStorageFirehoseGlueTablePolicy53C5060D": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Fn::Select": Array [
                          1,
                          Object {
                            "Fn::Split": Array [
                              "/",
                              Object {
                                "Fn::Join": Array [
                                  "",
                                  Array [
                                    Object {
                                      "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                                    },
                                    "/",
                                    Object {
                                      "Ref": "IntegrationInfDBTwitterTwitterRecordB6E69351",
                                    },
                                  ],
                                ],
                              },
                            ],
                          },
                        ],
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTwFeedStorageFirehoseGlueTablePolicy53C5060D",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTwFeedStorageFirehoseRoleBDA1E404",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTwFeedStorageFirehoseRoleBDA1E404": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTwFeedStorageFirehoseRoleDefaultPolicyB6532B5F": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTwFeedStorageFirehoseRoleDefaultPolicyB6532B5F",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTwFeedStorageFirehoseRoleBDA1E404",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTwFeedStorageKinesisFirehose2717DCB9": Object {
      "DependsOn": Array [
        "IntegrationTwFeedStorageFirehoseGlueKms82D47141",
        "IntegrationTwFeedStorageFirehoseGlueTablePolicy53C5060D",
        "IntegrationTwFeedStorageFirehoseRoleDefaultPolicyB6532B5F",
        "IntegrationTwFeedStorageFirehoseRoleBDA1E404",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroup945A718C",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroupfirehoselogstream797FAE95",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationTwFeedStorageFirehoseRoleBDA1E404",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Fn::Select": Array [
                  1,
                  Object {
                    "Fn::Split": Array [
                      "/",
                      Object {
                        "Fn::Join": Array [
                          "",
                          Array [
                            Object {
                              "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                            },
                            "/",
                            Object {
                              "Ref": "IntegrationInfDBTwitterTwitterRecordB6E69351",
                            },
                          ],
                        ],
                      },
                    ],
                  },
                ],
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "twfeedstorage/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "twfeedstorage/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationTwFeedStorageFirehoseRoleBDA1E404",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationTwFeedStorageKinesisFirehoseKinesisFirehosePolicyDED01CB7": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroup945A718C",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroupfirehoselogstream797FAE95",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTwFeedStorageKinesisFirehoseKinesisFirehosePolicyDED01CB7",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTwFeedStorageKinesisFirehoseKinesisFirehoseRole8ACF28E6",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTwFeedStorageKinesisFirehoseKinesisFirehoseRole8ACF28E6": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroup945A718C": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroupfirehoselogstream797FAE95": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationTwFeedStorageKinesisFirehosefirehoseloggroup945A718C",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTxtInImgEntityFirehoseGlueKms13C70E5E": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgEntityFirehoseGlueKms13C70E5E",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgEntityFirehoseRoleF8A843A9",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgEntityFirehoseGlueTablePolicy9C105C91": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgEntityFirehoseGlueTablePolicy9C105C91",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgEntityFirehoseRoleF8A843A9",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgEntityFirehoseRoleDefaultPolicy85C649FC": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgEntityFirehoseRoleDefaultPolicy85C649FC",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgEntityFirehoseRoleF8A843A9",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgEntityFirehoseRoleF8A843A9": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTxtInImgEntityKinesisFirehose9B2B792F": Object {
      "DependsOn": Array [
        "IntegrationTxtInImgEntityFirehoseGlueKms13C70E5E",
        "IntegrationTxtInImgEntityFirehoseGlueTablePolicy9C105C91",
        "IntegrationTxtInImgEntityFirehoseRoleDefaultPolicy85C649FC",
        "IntegrationTxtInImgEntityFirehoseRoleF8A843A9",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroup4DE3574A",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroupfirehoselogstreamE174C06B",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationTxtInImgEntityFirehoseRoleF8A843A9",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBTxtInImgEntitytxtinimgentityTableE8998841",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "txtinimgentity/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "txtinimgentity/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationTxtInImgEntityFirehoseRoleF8A843A9",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationTxtInImgEntityKinesisFirehoseKinesisFirehosePolicy197A3750": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroup4DE3574A",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroupfirehoselogstreamE174C06B",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgEntityKinesisFirehoseKinesisFirehosePolicy197A3750",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgEntityKinesisFirehoseKinesisFirehoseRole16EADE58",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgEntityKinesisFirehoseKinesisFirehoseRole16EADE58": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroup4DE3574A": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroupfirehoselogstreamE174C06B": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationTxtInImgEntityKinesisFirehosefirehoseloggroup4DE3574A",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTxtInImgKeyPhraseFirehoseGlueKms7B90E120": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgKeyPhraseFirehoseGlueKms7B90E120",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgKeyPhraseFirehoseGlueTablePolicyF70EA936": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgKeyPhraseFirehoseGlueTablePolicyF70EA936",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTxtInImgKeyPhraseFirehoseRoleDefaultPolicy1518F405": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgKeyPhraseFirehoseRoleDefaultPolicy1518F405",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgKeyPhraseKinesisFirehose33549B85": Object {
      "DependsOn": Array [
        "IntegrationTxtInImgKeyPhraseFirehoseGlueKms7B90E120",
        "IntegrationTxtInImgKeyPhraseFirehoseGlueTablePolicyF70EA936",
        "IntegrationTxtInImgKeyPhraseFirehoseRoleDefaultPolicy1518F405",
        "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroup990C7C5B",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroupfirehoselogstream839D676F",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBTxtInImgKeyPhrasetxtinimgkeyphraseTable0EC8DB26",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "txtinimgkeyphrase/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "txtinimgkeyphrase/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationTxtInImgKeyPhraseFirehoseRole7FD100B8",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationTxtInImgKeyPhraseKinesisFirehoseKinesisFirehosePolicyD3761F10": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroup990C7C5B",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroupfirehoselogstream839D676F",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgKeyPhraseKinesisFirehoseKinesisFirehosePolicyD3761F10",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehoseKinesisFirehoseRoleBB967F06",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgKeyPhraseKinesisFirehoseKinesisFirehoseRoleBB967F06": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroup990C7C5B": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroupfirehoselogstream839D676F": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationTxtInImgKeyPhraseKinesisFirehosefirehoseloggroup990C7C5B",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTxtInImgSentimentFirehoseGlueKms4D3BC908": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgSentimentFirehoseGlueKms4D3BC908",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgSentimentFirehoseRole3309E38D",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgSentimentFirehoseGlueTablePolicy533DD464": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgSentimentFirehoseGlueTablePolicy533DD464",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgSentimentFirehoseRole3309E38D",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgSentimentFirehoseRole3309E38D": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTxtInImgSentimentFirehoseRoleDefaultPolicyC2C3D583": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgSentimentFirehoseRoleDefaultPolicyC2C3D583",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgSentimentFirehoseRole3309E38D",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgSentimentKinesisFirehose853B28BB": Object {
      "DependsOn": Array [
        "IntegrationTxtInImgSentimentFirehoseGlueKms4D3BC908",
        "IntegrationTxtInImgSentimentFirehoseGlueTablePolicy533DD464",
        "IntegrationTxtInImgSentimentFirehoseRoleDefaultPolicyC2C3D583",
        "IntegrationTxtInImgSentimentFirehoseRole3309E38D",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroup4E278475",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroupfirehoselogstreamF4600A5E",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationTxtInImgSentimentFirehoseRole3309E38D",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBTxtInImgSentimenttxtinimgsentimentTable007CDA18",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "txtinimgsentiment/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "txtinimgsentiment/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationTxtInImgSentimentFirehoseRole3309E38D",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationTxtInImgSentimentKinesisFirehoseKinesisFirehosePolicyFD497AB1": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroup4E278475",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroupfirehoselogstreamF4600A5E",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationTxtInImgSentimentKinesisFirehoseKinesisFirehosePolicyFD497AB1",
        "Roles": Array [
          Object {
            "Ref": "IntegrationTxtInImgSentimentKinesisFirehoseKinesisFirehoseRole86A690E2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationTxtInImgSentimentKinesisFirehoseKinesisFirehoseRole86A690E2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroup4E278475": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroupfirehoselogstreamF4600A5E": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationTxtInImgSentimentKinesisFirehosefirehoseloggroup4E278475",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationYouTubeCommentsFirehoseGlueKms6F8A6FCD": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "kms:Decrypt",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/glue",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationYouTubeCommentsFirehoseGlueKms6F8A6FCD",
        "Roles": Array [
          Object {
            "Ref": "IntegrationYouTubeCommentsFirehoseRole207AE93B",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationYouTubeCommentsFirehoseGlueTablePolicy4203E154": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "glue:GetTable",
                "glue:GetTableVersion",
                "glue:GetTableVersions",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":table/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                      "/",
                      Object {
                        "Ref": "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":database/",
                      Object {
                        "Ref": "IntegrationInfDBTweetDBF81EA9E5",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:aws:glue:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":catalog",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationYouTubeCommentsFirehoseGlueTablePolicy4203E154",
        "Roles": Array [
          Object {
            "Ref": "IntegrationYouTubeCommentsFirehoseRole207AE93B",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationYouTubeCommentsFirehoseRole207AE93B": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationYouTubeCommentsFirehoseRoleDefaultPolicy51CF8EFC": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject*",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationYouTubeCommentsFirehoseRoleDefaultPolicy51CF8EFC",
        "Roles": Array [
          Object {
            "Ref": "IntegrationYouTubeCommentsFirehoseRole207AE93B",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationYouTubeCommentsKinesisFirehose9913E37F": Object {
      "DependsOn": Array [
        "IntegrationYouTubeCommentsFirehoseGlueKms6F8A6FCD",
        "IntegrationYouTubeCommentsFirehoseGlueTablePolicy4203E154",
        "IntegrationYouTubeCommentsFirehoseRoleDefaultPolicy51CF8EFC",
        "IntegrationYouTubeCommentsFirehoseRole207AE93B",
      ],
      "Properties": Object {
        "DeliveryStreamEncryptionConfigurationInput": Object {
          "KeyType": "AWS_OWNED_CMK",
        },
        "DeliveryStreamType": "DirectPut",
        "ExtendedS3DestinationConfiguration": Object {
          "BucketARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationS3Bucket22BFCA0D",
              "Arn",
            ],
          },
          "BufferingHints": Object {
            "IntervalInSeconds": 600,
            "SizeInMBs": 64,
          },
          "CloudWatchLoggingOptions": Object {
            "Enabled": true,
            "LogGroupName": Object {
              "Ref": "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroup992BBAC5",
            },
            "LogStreamName": Object {
              "Ref": "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroupfirehoselogstream648ED089",
            },
          },
          "CompressionFormat": "UNCOMPRESSED",
          "DataFormatConversionConfiguration": Object {
            "InputFormatConfiguration": Object {
              "Deserializer": Object {
                "OpenXJsonSerDe": Object {},
              },
            },
            "OutputFormatConfiguration": Object {
              "Serializer": Object {
                "ParquetSerDe": Object {},
              },
            },
            "SchemaConfiguration": Object {
              "DatabaseName": Object {
                "Ref": "IntegrationInfDBTweetDBF81EA9E5",
              },
              "RoleARN": Object {
                "Fn::GetAtt": Array [
                  "IntegrationYouTubeCommentsFirehoseRole207AE93B",
                  "Arn",
                ],
              },
              "TableName": Object {
                "Ref": "IntegrationInfDBYoutubeCommentsyoutubecommentsTable8964DB7C",
              },
            },
          },
          "EncryptionConfiguration": Object {
            "KMSEncryptionConfig": Object {
              "AWSKMSKeyARN": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":kms:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":alias/aws/s3",
                  ],
                ],
              },
            },
          },
          "ErrorOutputPrefix": "youtubecomments/error/!{firehose:random-string}/!{firehose:error-output-type}/created_at=!{timestamp:yyyy-MM-dd}/",
          "Prefix": "youtubecomments/created_at=!{timestamp:yyyy-MM-dd}/",
          "RoleARN": Object {
            "Fn::GetAtt": Array [
              "IntegrationYouTubeCommentsFirehoseRole207AE93B",
              "Arn",
            ],
          },
        },
      },
      "Type": "AWS::KinesisFirehose::DeliveryStream",
    },
    "IntegrationYouTubeCommentsKinesisFirehoseKinesisFirehosePolicy7AF69C21": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:AbortMultipartUpload",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListBucketMultipartUploads",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "IntegrationS3Bucket22BFCA0D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "IntegrationS3Bucket22BFCA0D",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "logs:PutLogEvents",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    Object {
                      "Ref": "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroup992BBAC5",
                    },
                    ":log-stream:",
                    Object {
                      "Ref": "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroupfirehoselogstream648ED089",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "IntegrationYouTubeCommentsKinesisFirehoseKinesisFirehosePolicy7AF69C21",
        "Roles": Array [
          Object {
            "Ref": "IntegrationYouTubeCommentsKinesisFirehoseKinesisFirehoseRoleEED13794",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "IntegrationYouTubeCommentsKinesisFirehoseKinesisFirehoseRoleEED13794": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "firehose.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroup992BBAC5": Object {
      "DeletionPolicy": "Retain",
      "Metadata": Object {
        "cfn_nag": Object {
          "rules_to_suppress": Array [
            Object {
              "id": "W86",
              "reason": "Retention period for CloudWatchLogs LogGroups are set to 'Never Expire' to preserve customer data indefinitely",
            },
            Object {
              "id": "W84",
              "reason": "By default CloudWatchLogs LogGroups data is encrypted using the CloudWatch server-side encryption keys (AWS Managed Keys)",
            },
          ],
        },
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroupfirehoselogstream648ED089": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "LogGroupName": Object {
          "Ref": "IntegrationYouTubeCommentsKinesisFirehosefirehoseloggroup992BBAC5",
        },
      },
      "Type": "AWS::Logs::LogStream",
      "UpdateReplacePolicy": "Retain",
    },
  },
}
`;
